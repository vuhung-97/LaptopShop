@model LaptopShop.ViewModels.LaptopDetailViewModel
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "_DanhSachLaptopLayout";
}

<!-- Shop Detail Start -->
<div class="container-fluid pb-5">
    <div class="row px-xl-5">
        <div class="col-lg-5 mb-30">
            <div id="product-carousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner bg-light">
                    <div class="carousel-item active">
                        <img class="w-100 h-100" src="~/Hinh/Laptop/@Model.Laptop.HinhAnh" alt="@Model.Laptop.TenLapTop">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#product-carousel" data-slide="prev">
                    <i class="fa fa-2x fa-angle-left text-dark"></i>
                </a>
                <a class="carousel-control-next" href="#product-carousel" data-slide="next">
                    <i class="fa fa-2x fa-angle-right text-dark"></i>
                </a>
            </div>
        </div>

        <div class="col-lg-7 h-auto mb-30">
            <div class="h-100 bg-light p-30">

                <!-- Tên sản phẩm -->
                <h3><b>@Model.Laptop.TenLapTop</b></h3>

                <!-- Loại và thương hiệu -->
                <h5 class="text-muted mb-3">@Model.Laptop.TenLoai - @Model.Laptop.ThuongHieu</h5>

                <!-- Giá bán -->
                <h3 class="font-weight-semi-bold mb-4 text-danger">@string.Format("{0:N0}", Model.Laptop.GiaBan) VNĐ</h3>

                <!-- Thông tin cấu hình -->
                <div class="mb-4">
                    <h4 class="mb-3">Thông Tin Cấu Hình</h4>
                    <table class="table table-borderless">
                        <tbody>
                            <tr>
                                <td width="25%" class="fw-bold">CPU:</td>
                                <td>@Model.Detail.Cpu</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">RAM:</td>
                                <td>@Model.Detail.Ram</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Ổ cứng:</td>
                                <td>@Model.Detail.Ocung</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Màn hình:</td>
                                <td>@Model.Detail.ManHinh</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Card đồ họa:</td>
                                <td>@Model.Detail.DoHoa</td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <!-- Form đặt hàng -->
                <form asp-action="AddToCartAndShow" asp-controller="ShoppingCart" asp-route-idlaptop="@Model.Laptop.IdLaptop">
                    <div class="d-flex align-items-center mb-4 pt-2">
                        <div class="input-group quantity mr-3" style="width: 130px;">
                            <div class="input-group-btn">
                                <button class="btn btn-primary btn-minus" type="button" id="btnMinus">
                                    <i class="fa fa-minus"></i>
                                </button>
                            </div>
                            <input type="text" class="form-control bg-secondary border-0 text-center" value="@ViewBag.sl" name="soluong" id="quantityInput">
                            <div class="input-group-btn">
                                <button class="btn btn-primary btn-plus" type="button" id="btnPlus">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <button class="btn btn-primary px-3" type="submit">
                            <i class="fa fa-shopping-cart mr-1"></i> Thêm vào giỏ
                        </button>
                    </div>
                </form>

                @* <!-- Chia sẻ mạng xã hội --> *@
                @* <div class="d-flex pt-2"> *@
                @*     <strong class="text-dark mr-2">Chia sẻ:</strong> *@
                @*     <div class="d-inline-flex"> *@
                @*         <a class="text-dark px-2" href="#"><i class="fab fa-facebook-f"></i></a> *@
                @*         <a class="text-dark px-2" href="#"><i class="fab fa-twitter"></i></a> *@
                @*         <a class="text-dark px-2" href="#"><i class="fab fa-linkedin-in"></i></a> *@
                @*         <a class="text-dark px-2" href="#"><i class="fab fa-pinterest"></i></a> *@
                @*     </div> *@
                @* </div> *@

            </div>
        </div>

    </div>
    <div class="row px-xl-5">
        <div class="col">
            <div class="bg-light p-30">
                <div class="nav nav-tabs mb-4">
                    <a class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">Description</a>
                    <a class="nav-item nav-link text-dark" data-toggle="tab" href="#tab-pane-2">Information</a>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tab-pane-1">
                        <h4 class="mb-3">Mô Tả Sản Phẩm</h4>
                        <p>
                            Chiếc laptop này là sự kết hợp hoàn hảo giữa hiệu năng mạnh mẽ, thiết kế tinh tế và tính di động cao – đáp ứng đầy đủ nhu cầu sử dụng trong công việc, học tập và giải trí. Với thiết kế mỏng nhẹ nhưng chắc chắn, sản phẩm phù hợp cho những người thường xuyên di chuyển như sinh viên, nhân viên văn phòng, hay doanh nhân.
                        </p>
                        <p>
                            Laptop được trang bị bộ vi xử lý hiện đại, dung lượng RAM lớn và ổ cứng tốc độ cao, giúp khởi động nhanh, thao tác mượt mà và xử lý hiệu quả các ứng dụng đa nhiệm. Màn hình sắc nét với độ phân giải cao mang đến trải nghiệm hình ảnh sống động, phù hợp cho cả công việc đồ họa lẫn xem phim giải trí. Hệ thống âm thanh được tối ưu hóa cũng góp phần mang lại trải nghiệm chân thực và sống động hơn.
                        </p>
                        <p>
                            Ngoài ra, bàn phím được thiết kế khoa học với hành trình phím hợp lý, tạo cảm giác gõ thoải mái ngay cả khi làm việc nhiều giờ liền. Touchpad nhạy và hỗ trợ đa điểm giúp thao tác nhanh chóng, chính xác. Tản nhiệt thông minh giữ máy luôn mát mẻ trong quá trình sử dụng liên tục.
                        </p>
                        <p>
                            Với thời lượng pin ấn tượng, chiếc laptop này giúp bạn yên tâm làm việc hoặc học tập mà không lo ngắt quãng. Các cổng kết nối đầy đủ như USB, HDMI, jack tai nghe, khe thẻ nhớ... giúp bạn dễ dàng kết nối với các thiết bị ngoại vi và phục vụ nhiều mục đích sử dụng khác nhau.
                        </p>
                        <p>
                            Đây thực sự là một thiết bị đáng đầu tư nếu bạn đang tìm kiếm một chiếc máy tính xách tay cân bằng giữa hiệu năng, thiết kế và giá thành hợp lý. Cho dù bạn là người mới bắt đầu học công nghệ hay là người dùng chuyên nghiệp, sản phẩm này đều sẵn sàng đồng hành cùng bạn trong mọi hành trình.
                        </p>
                        <p>
                            Với bộ vi xử lý @Model.Detail.Cpu kết hợp cùng @Model.Detail.Ram RAM, chiếc @Model.Laptop.TenLapTop mang đến hiệu suất vượt trội cho cả tác vụ văn phòng lẫn nhu cầu giải trí đa phương tiện.
                        </p>

                    </div>

                    <div class="tab-pane fade" id="tab-pane-2">
                        <h4 class="mb-3">Thông Tin Cấu Hình Chi Tiết</h4>
                        <div class="row">
                            <div class="col-12">
                                <table class="table table-borderless">
                                    <tbody>
                                        <tr>
                                            <td width="25%" class="fw-bold">CPU:</td>
                                            <td>@Model.Detail.Cpu</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">RAM:</td>
                                            <td>@Model.Detail.Ram</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Ổ cứng:</td>
                                            <td>@Model.Detail.Ocung</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Màn hình:</td>
                                            <td>@Model.Detail.ManHinh</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Card đồ họa:</td>
                                            <td>@Model.Detail.DoHoa</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Kết nối:</td>
                                            <td>@Model.Detail.CongGiaoTiep</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Pin:</td>
                                            <td>@Model.Detail.Pin</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Hệ điều hành:</td>
                                            <td>@Model.Detail.HeDieuHanh</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Trọng lượng:</td>
                                            <td>@Model.Detail.TrongLuong</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Shop Detail End -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const quantityInput = document.getElementById('quantityInput');
        const btnMinus = document.getElementById('btnMinus');
        const btnPlus = document.getElementById('btnPlus');

        const minQuantity = 1;
        const maxQuantity = parseInt('@Model.Laptop.SoLuong'); // Giả sử có thuộc tính SoLuong trong Model.Laptop

        // Hàm cập nhật trạng thái nút
        function updateButtonStates() {
            const currentValue = parseInt(quantityInput.value);

            // Vô hiệu hóa nút trừ nếu đã đạt giá trị tối thiểu
            if (currentValue <= minQuantity) {
                btnMinus.disabled = true;
                btnMinus.classList.add('opacity-50');
            } else {
                btnMinus.disabled = false;
                btnMinus.classList.remove('opacity-50');
            }

            // Vô hiệu hóa nút cộng nếu đã đạt giá trị tối đa
            if (currentValue >= maxQuantity) {
                btnPlus.disabled = true;
                btnPlus.classList.add('opacity-50');
            } else {
                btnPlus.disabled = false;
                btnPlus.classList.remove('opacity-50');
            }
        }

        //Xử lý sự kiện click nút trừ
        btnMinus.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            updateButtonStates();
        });

        //Xử lý sự kiện click nút cộng
        btnPlus.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            updateButtonStates();
        });

        // Khởi tạo trạng thái ban đầu
        updateButtonStates();

        // Xử lý khi người dùng nhập trực tiếp (nếu bỏ readonly)
        quantityInput.addEventListener('input', function() {
            let value = parseInt(this.value);
            updateButtonStates();

            if (isNaN(value) || value < minQuantity) {
                this.value = minQuantity;
            } else if (value > maxQuantity) {
                this.value = maxQuantity;
            }
        });
    });
</script>